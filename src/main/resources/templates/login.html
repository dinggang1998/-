<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="global/head::header-main"/>

<body class="login">
<div>
    <a class="hiddenanchor" id="signup"></a>
    <a class="hiddenanchor" id="signin"></a>

    <div class="login_wrapper">
        <div class="animate form login_form">
            <section class="login_content">
                <form id="loginForm">
                    <h1>登录</h1>
                    <div>
                        <input type="text" id="username" class="form-control" placeholder="用户名" required=""/>
                    </div>
                    <div>
                        <input type="text" class="form-control" name="password" id="password" placeholder="密码"
                               minlength="4" required onfocus="this.type='password'">
                    </div>
                    <div>
                        <a class="btn btn-default submit" id="submit" href="#">登入</a>
                        <a class="reset_pass" href="#">忘记密码?</a>
                    </div>

                    <div class="clearfix"></div>

                    <div class="separator">
                        <p class="change_link">首次登录?
                            <a href="#signup" class="to_register"> 创建账户 </a>
                        </p>

                        <div class="clearfix"></div>
                        <br/>
                        <div>
                            <h1><i class="fa fa-github"></i> 叮当猫</h1>
                            <p>©2022 All Rights Reserved. Privacy and Terms</p>
                        </div>
                    </div>
                </form>
            </section>
        </div>

        <div id="register" class="animate form registration_form">
            <section class="login_content">
                <form>
                    <h1>创建用户</h1>
                    <div>
                        <input type="text" class="form-control" placeholder="用户名" required=""/>
                    </div>
                    <div>
                        <input type="email" class="form-control" placeholder="邮箱" required=""/>
                    </div>
                    <div>
                        <input type="password" class="form-control" placeholder="密码" required=""/>
                    </div>
                    <div>
                        <a class="btn btn-default submit" href="index">提交</a>
                    </div>

                    <div class="clearfix"></div>

                    <div class="separator">
                        <p class="change_link">老用户 ?
                            <a href="#signin" class="to_register"> 登入 </a>
                        </p>

                        <div class="clearfix"></div>
                        <br/>

                        <div>
                            <h1><i class="fa fa-github"></i> 叮当猫</h1>
                            <p>©2022 All Rights Reserved. Privacy and Terms</p>
                        </div>
                    </div>
                </form>
            </section>
        </div>
    </div>
</div>
</body>
<script>

    $("#submit").click(function () {
        if (!$("#username").val()) {
            swal.fire('请输入用户名!')
            return;
        }
        if (!$("#password").val()) {
            swal.fire('请输入密码!')
            return;
        }

        $.ajax({
            type: "POST",
            url: getRealPath() + "/api/v1/login/loginWeb",
            data: {username: $("#username").val(), pwd: $("#password").val()},
            dataType: "json",
            success: function (data) {
                if (data.code == "200") {
                    window.location.href = getRealPath() + '/index';
                } else {
                    swal.fire(
                        '登录失败!',
                        data.message,
                        'error'
                    )
                }
            },
            fail: function () {
                window.location.href = getRealPath() + "/500";

            }
        });
    })

</script>

</html>
